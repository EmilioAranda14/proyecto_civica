version: 2

sources:
  - name: proyecto_civica_dev_bronze        
    description: > 
      Raw data demo from Database.
    schema: PROYECTO_CIVICA_DEV_BRONZE
    database: PROYECTO_CIVICA_DEV_BRONZE

    quoting:
      database: false
      schema: false
      identifier: false

    freshness:
      warn_after: {count: 500, period: day} 
      error_after: {count: 400, period: day}
  
    tables:

      - name: raw_addresses
        description: >
          Master table of users' postal addresses.
        loaded_at_field: _fivetran_synced
        columns:
          - name: address_id
            description: >
              Unique identifier (UUID) of the address.
            data_tests:
              - unique
              - not_null
          - name: zipcode
            description: >
              Postal/ZIP code of the address.
            data_tests:
              - not_null
          - name: address
            description: >
              Full address line (street, number, etc.).
            data_tests:
              - not_null
          - name: state
            description: >
              State/Province of the address.
            data_tests:
              - not_null
          - name: _fivetran_deleted
            description: >
              Soft-delete flag set by Fivetran (true/false or timestamp).
          - name: _fivetran_synced
            description: >
              Timestamp of the last load performed by Fivetran.
            data_tests:
              - not_null

      - name: raw_events
        description: >
          Log of user navigation/activity events (web/app tracking).
        loaded_at_field: _fivetran_synced
        columns:
          - name: event_id
            description: >
              Unique identifier (UUID) of the event.
            data_tests:
              - unique
              - not_null
          - name: page_url
            description: >
              URL of the page where the event occurred.
            data_tests:
              - not_null
          - name: event_type
            description: >
              Event type (e.g., page_view, add_to_cart, checkout, purchase).
            data_tests:
              - not_null
          - name: user_id
            description: >
              Identifier of the user who generated the event.
            data_tests:
              - not_null
          - name: product_id
            description: >
              Identifier of the product associated with the event.
          - name: session_id
            description: >
              Identifier of the session in which the event occurred.
          - name: created_at
            description: >
              Event creation timestamp (UTC).
            data_tests:
              - not_null
          - name: order_id
            description: >
              Identifier of the order associated with the event.
          - name: _fivetran_deleted
            description: >
              Soft-delete flag set by Fivetran.
          - name: _fivetran_synced
            description: >
              Timestamp of the last load performed by Fivetran.
            data_tests:
              - not_null

      - name: raw_orders
        description: >
          Users' orders with amounts, status, and logistics data.
        loaded_at_field: _fivetran_synced
        columns:
          - name: order_id
            description: >
              Unique identifier (UUID) of the order.
            data_tests:
              - unique
              - not_null
          - name: shipping_service
            description: >
              Name of the carrier/shipping service used.
            data_tests:
              - not_null
          - name: shipping_cost
            description: >
              Shipping cost associated with the order.
            data_tests:
              - not_null
              - positive_values
          - name: address_id
            description: >
              Delivery address identifier.
            data_tests:
              - not_null
          - name: created_at
            description: >
              Order creation timestamp.
            data_tests:
              - not_null
          - name: promo_id
            description: >
              Promotion identifier applied to the order.
          - name: estimated_delivery_at
            description: >
              Estimated delivery date/time.
            data_tests:
              - not_null
          - name: order_cost
            description: >
              Order amount before taxes/shipping/discounts.
            data_tests:
              - not_null
              - positive_values
          - name: user_id
            description: >
              Identifier of the user who placed the order.
            data_tests:
              - not_null
          - name: order_total
            description: >
              Total order amount (includes discounts, taxes, and shipping).
            data_tests:
              - not_null
              - positive_values
          - name: delivered_at
            description: >
              Actual delivery date/time.
          - name: tracking_id
            description: >
              Shipment tracking identifier provided by the carrier.
            data_tests:
              - not_null
          - name: status
            description: >
              Order status (e.g., pending, paid, shipped, delivered, cancelled, returned).
            data_tests:
              - not_null
              - accepted_values:
                  values: ['preparing','shipped','delivered']
          - name: _fivetran_deleted
            description: >
              Soft-delete flag set by Fivetran.
          - name: _fivetran_synced
            description: >
              Timestamp of the last load performed by Fivetran.
            data_tests:
              - not_null

      - name: raw_users
        description: >
          Master table of users/customers with metadata and contact information.
        loaded_at_field: _fivetran_synced
        columns:
          - name: user_id
            description: >
              Unique identifier (UUID) of the user.
            data_tests:
              - unique
              - not_null
          - name: updated_at
            description: >
              Timestamp of the last profile update.
          - name: address_id
            description: >
              User's primary address.
          - name: last_name
            description: >
              User's last name.
          - name: created_at
            description: >
              User creation timestamp.
            data_tests:
              - not_null
          - name: phone_number
            description: >
              User's contact phone number.
          - name: total_orders
            description: >
              Total number of orders associated with the user.
            data_tests:
              - positive_values
          - name: first_name
            description: >
              User's first name.
          - name: email
            description: >
              User's email address.
            data_tests:
              - not_null
          - name: _fivetran_deleted
            description: >
              Soft-delete flag set by Fivetran.
          - name: _fivetran_synced
            description: >
              Timestamp of the last load performed by Fivetran.
            data_tests:
              - not_null

      - name: raw_promos
        description: >
          Master table of promotions/discounts available in the system.
        loaded_at_field: _fivetran_synced
        columns:
          - name: promo_id
            description: >
              Unique identifier of the promotion.
            data_tests:
              - unique
              - not_null
          - name: discount
            description: >
              Discount to be applied by the promotion (percentage or fixed amount).
            data_tests:
              - not_null
              - positive_values
          - name: status
            description: >
              Status of the promotion (e.g., active, inactive).
          - name: _fivetran_deleted
            description: >
              Soft-delete flag set by Fivetran.
          - name: _fivetran_synced
            description: >
              Timestamp of the last load performed by Fivetran.
            data_tests:
              - not_null

      - name: raw_order_items
        description: >
          Order line items: product quantities per order.
        loaded_at_field: _fivetran_synced
        columns:
          - name: order_id
            description: >
              Order to which the line item belongs.
            data_tests:
              - not_null
          - name: product_id
            description: >
              Product included in the order line.
            data_tests:
              - not_null
          - name: quantity
            description: >
              Number of product units in the line item.
            data_tests:
              - not_null
              - positive_values
          - name: _fivetran_deleted
            description: >
              Soft-delete flag set by Fivetran.
          - name: _fivetran_synced
            description: >
              Timestamp of the last load performed by Fivetran.
            data_tests:
              - not_null

      - name: raw_products
        description: >
          Master table of products with price, inventory, and basic metadata.
        loaded_at_field: _fivetran_synced
        columns:
          - name: product_id
            description: >
              Unique identifier (UUID) of the product.
            data_tests:
              - unique
              - not_null
          - name: price
            description: >
              Current unit price of the product.
            data_tests:
              - not_null
              - positive_values
          - name: name
            description: >
              Product name.
            data_tests:
              - not_null
          - name: inventory
            description: >
              Units available in stock.
            data_tests:
              - not_null
              - positive_values
          - name: _fivetran_deleted
            description: >
              Soft-delete flag set by Fivetran.
          - name: _fivetran_synced
            description: >
              Timestamp of the last load performed by Fivetran.
            data_tests:
              - not_null

